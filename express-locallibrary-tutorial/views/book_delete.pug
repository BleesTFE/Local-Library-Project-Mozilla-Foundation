extends layout

block content
    h1 Title: #{book.title}

    p #[strong Author:]
        a(href=book.author.url) #{book.author.name}
    p #[strong Summary:] #{book.summary}
    p #[strong ISBN:] #{book.isbn}
    p #[strong Genre:] 
        each val, index in book.genre
            a(href=val.url) #{val.name}
            if index < book.genre.length - 1
                | ,

    if book_instances.length

        p #[strong Delete the following instances before attempting to delete this book.]

        div(style='margin-left:20px;margin-top:20px')

            h4 Instances

            dl
            each val in book_instances
                hr
                p #[strong Imprint:] #{val.imprint}
                if val.status != 'Available'
                    p #[strong Due back:] #{val.due_back}
                p #[strong Id:]
                    a(href=val.url) #{val._id}

    else
        p Do you really want to delete this book?

        form(method='POST' action='')
            div.form-group
                input#authorid.form-control(type='hidden',name='authorid', required='true', value=book._id )

            button.btn.btn-primary(type='submit') Delete
